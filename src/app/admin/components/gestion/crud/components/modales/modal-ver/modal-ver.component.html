<app-modal-content [options]="verModalOptions" #modalContent>
    <!-- Editoriales -->
    <div *ngIf="modo === 'editoriales' && editorial">
        <div class="card mb-4">
            <div class="card-header bg-blue-primary">
                <h5 class="mb-0">Información General</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Nombre:</div>
                    <div class="col-md-8">{{ editorial.nombre }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Estado:</div>
                    <div class="col-md-8">
                        <div class="d-flex align-items-center">
                            <svg width="16" height="16" class="me-2 puntero" (click)="toggleEstado()">
                                <circle cx="8" cy="8" r="6" [attr.fill]="editorial.estado ? 'green' : 'red'" />
                            </svg>
                            {{ editorial.estado ? 'Activo' : 'Inactivo' }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-blue-primary">
                <h5 class="mb-0">Correos Electrónicos</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    <li *ngFor="let correo of editorial.correos; let i = index" class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <span class="badge bg-blue-primary me-2 text-black">{{ i + 1 }}</span>
                            {{ correo ? correo : 'No especificado' }}
                        </div>
                        <a *ngIf="correo" [href]="'mailto:' + correo" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </li>
                    <li *ngIf="!editorial.correos || editorial.correos.length === 0" class="list-group-item text-muted">
                        No hay correos electrónicos registrados
                    </li>
                </ul>
            </div>
        </div>

        <div class="card">
            <div class="card-header bg-blue-primary">
                <h5 class="mb-0">Teléfonos</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    <li *ngFor="let telefono of editorial.telefonos; let i = index" class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <span class="badge bg-blue-primary me-2 text-black">{{ i + 1 }}</span>
                            {{ telefono ? telefono : 'No especificado' }}
                        </div>
                        <a *ngIf="telefono" [href]="'tel:' + telefono" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-phone"></i>
                        </a>
                    </li>
                    <li *ngIf="!editorial.telefonos || editorial.telefonos.length === 0" class="list-group-item text-muted">
                        No hay teléfonos registrados
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div *ngIf="!editorial && modo === 'editoriales'" class="alert alert-info">
        <i class="fas fa-spinner fa-spin me-2"></i>
        Cargando información de la editorial...
    </div>

    <!-- Libros -->
    <div *ngIf="modo === 'libros' && libro">
        <div class="card mb-4">
            <div class="card-header bg-blue-primary">
                <h5 class="mb-0">Información General</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Nombre:</div>
                    <div class="col-md-8">{{ libro.nombre }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">ISBN:</div>
                    <div class="col-md-8">{{ libro.isbn }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Editorial:</div>
                    <div class="col-md-8">{{ libro.editorial?.nombre }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Precio:</div>
                    <div class="col-md-8">{{ libro.precio }} €</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">Estado:</div>
                    <div class="col-md-8">
                        <div class="d-flex align-items-center">
                            <svg width="16" height="16" class="me-2 puntero" (click)="toggleLibroEstado()">
                                <circle cx="8" cy="8" r="6" [attr.fill]="libro.estado ? 'green' : 'red'" />
                            </svg>
                            {{ libro.estado ? 'Activo' : 'Inactivo' }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="!libro && modo === 'libros'" class="alert alert-info">
        <i class="fas fa-spinner fa-spin me-2"></i>
        Cargando información del libro...
    </div>

    <!-- Reservas -->
    <div *ngIf="modo === 'reservas' && librosReserva">
        <div class="row row-cols-1 row-cols-lg-2 g-4">
            <div *ngFor="let libro of librosReserva" class="col">
                <div class="card h-100 shadow-sm hover-card">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0 text-truncate pe-2">{{ libro.nombre }}</h5>
                        <span class="badge bg-light text-dark flex-shrink-0">
                            <i class="fas" [ngClass]="{
                                'fa-question-circle text-warning': libro.estado === 'Sin Verificar',
                                'fa-clock text-info': libro.estado === 'Pendiente de pedir',
                                'fa-shopping-cart text-primary': libro.estado === 'Pedido',
                                'fa-truck text-primary': libro.estado === 'Recibido',
                                'fa-check-circle text-success': libro.estado === 'Recogido',
                                'fa-times-circle text-danger': libro.estado === 'Anulado'
                            }"></i>
                            <span class="d-none d-sm-inline ms-1">{{ libro.estado }}</span>
                        </span>
                    </div>
                    <div class="card-body p-3">
                        <div class="row g-3">
                            <div class="col-12">
                                <div class="d-flex align-items-center p-2 bg-light rounded">
                                    <i class="fas fa-barcode me-3 text-primary flex-shrink-0"></i>
                                    <div class="w-100">
                                        <small class="text-muted d-block">ISBN</small>
                                        <strong class="text-truncate d-block">{{ libro.isbn }}</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="d-flex align-items-center p-2 bg-light rounded">
                                    <i class="fas fa-building me-3 text-primary flex-shrink-0"></i>
                                    <div class="w-100">
                                        <small class="text-muted d-block">Editorial</small>
                                        <strong class="text-truncate d-block">{{ libro.editorial }}</strong>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="d-flex align-items-center p-2 bg-light rounded">
                                    <i class="fas fa-euro-sign me-3 text-primary flex-shrink-0"></i>
                                    <div class="w-100">
                                        <small class="text-muted d-block">Precio de compra</small>
                                        <strong>{{ libro.precio }} €</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-top-0" *ngIf="libro.estado !== 'Anulado' && libro.estado !== 'Recogido'">
                        <button class="btn btn-outline-danger w-100" (click)="anularLibro(libro)">
                            <i class="fas fa-ban me-2"></i>
                            Anular Libro
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="!librosReserva && modo === 'reservas'" class="alert alert-info">
        <i class="fas fa-spinner fa-spin me-2"></i>
        Cargando información de la reserva...
    </div>

</app-modal-content>
